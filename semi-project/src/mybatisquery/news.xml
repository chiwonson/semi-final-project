<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
          "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
          
<mapper namespace="a.b.c.news.dao.NewsDAO">

<select id="newsSelect" parameterType="newsvo" resultType="newsvo">	
	
		SELECT 		
		FROM 	
		WHERE 	A.DELETEYN = 'Y' 
		AND     A.MNUM = #{mnum}	
		AND     A.BNUM = #{bnum}
		
</select>

<select id="newsSelectAll" parameterType="newsvo" resultType="newsvo">	
	
		SELECT 	*
		FROM 	
		WHERE 	A.DELETEYN = 'Y' 
		AND     A.MNUM = #{mnum}	
		AND     A.BNUM = #{bnum}
		
</select>


<insert id="newsInsert" parameterType="newsvo" >
 
	INSERT INTO SPRING_BOARD_LIKE (	BLNUM, MNUM, BNUM, 									
									DELETEYN, INSERTDATE, UPDATEDATE)
            				VALUES(	(SELECT NVL(MAX(BLNUM), 0) + 1 AS BLNUM FROM SPRING_BOARD_LIKE), 
	            					#{mnum}, 
	            					#{bnum},  	            				 				
	            					'Y', 
	            					SYSDATE, 
	            					SYSDATE)
</insert>


<update id="newsUpdate" parameterType="newsvo" >
    
	UPDATE 	SPRING_BOARD_LIKE 
	   SET  LIKE_CNT_1 = LIKE_CNT_1 + 1
		   ,UPDATEDATE = SYSDATE
	 WHERE  MNUM = #{mnum}
	 AND    BNUM = #{bnum}	 
	 
</update>

<update id="newsDelete" parameterType="newsvo" >
    
	UPDATE 	SPRING_BOARD_LIKE 
	   SET  LIKE_CNT_2 = LIKE_CNT_2 + 1
		   ,UPDATEDATE = SYSDATE
	 WHERE  MNUM = #{mnum}
	 AND    BNUM = #{bnum}	 
	 
</update>

</mapper>